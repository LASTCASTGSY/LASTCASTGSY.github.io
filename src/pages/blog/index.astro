---
import BaseLayout from '../../layouts/BaseLayout.astro';
import '../../styles/global.css';
import { getCollection } from 'astro:content';

const base = import.meta.env.BASE_URL;

const posts = (await getCollection('blog'))
  .filter(p => !p.data.draft)
  .sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime());
---

<BaseLayout title="Blog" description="Notes on diffusion models, time-series forecasting, debugging, and evaluation." activeNav="blog">
  <div class="container">
    <div class="page-header">
      <h1>Blog</h1>
      <p>Technical notes, debugging stories, and things I've learned building wave forecasting models.</p>
    </div>

    <div class="post-list">
      {posts.map((post) => (
        <a href={`${base}blog/${post.slug}/`} class="post-item">
          <div class="post-meta">{post.data.date} Â· {post.data.tags.join(', ')}</div>
          <h3>{post.data.title}</h3>
          <p>{post.data.description}</p>
        </a>
      ))}
    </div>
  </div>
</BaseLayout>
